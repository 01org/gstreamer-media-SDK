function(FindMediaSDK)
  pkg_check_modules(MFX  QUIET  mfx)
  set(MFX_LIBS "")
  if(MFX_FOUND)
     message(STATUS "MFX_LIBRARY_DIRS: ${MFX_LIBDIR}")
     include_directories (${MFX_INCLUDE_DIRS})
  else()
     if (${CMAKE_CXX_COMPILER_ID} STREQUAL MSVC)
        if(DEFINED ENV{INTELMEDIASDKROOT})
          set(MFX_HOME $ENV{INTELMEDIASDKROOT})
        endif()
      endif()

    set(MFX_INCLUDES "${MFX_HOME}/include")
    set(MFX_LIBRARY  "${MFX_HOME}/lib/x64/libmfx.lib")
    message(STATUS "MediaSDK include directory: ${MFX_INCLUDES}")
    message(STATUS "MediaSDK library directory: ${MFX_LIBRARY}")
    include_directories(${MFX_INCLUDES})
    endif()
    add_library(libmfx STATIC IMPORTED)
    set_property(TARGET libmfx PROPERTY IMPORTED_LOCATION ${MFX_LIBRARY})
endfunction(FindMediaSDK)
